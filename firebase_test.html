<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Firebase - FinWise</title>
</head>
<body>
    <h1>Teste de Conex√£o Firebase</h1>
    <div id="output"></div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import {
            getFirestore,
            collection,
            getDocs,
            query,
            limit
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBnvXfbmMdlKXw7tS-IjzsW8fSzDZOf5wk",
            authDomain: "finans-app-c740d.firebaseapp.com",
            projectId: "finans-app-c740d",
            storageBucket: "finans-app-c740d.firebasestorage.app",
            messagingSenderId: "451126137935",
            appId: "1:451126137935:web:genkg59foapmuiujj56os3qgmog189vc"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const output = document.getElementById('output');

        async function testConnection() {
            try {
                output.innerHTML += '<p>üîÑ Testando conex√£o com Firebase...</p>';

                // Testar conex√£o b√°sica
                const testQuery = query(collection(db, 'users'), limit(1));
                const querySnapshot = await getDocs(testQuery);

                output.innerHTML += '<p>‚úÖ Conex√£o com Firebase estabelecida!</p>';
                output.innerHTML += `<p>üìä Documentos encontrados na cole√ß√£o 'users': ${querySnapshot.size}</p>`;

                if (querySnapshot.size > 0) {
                    const doc = querySnapshot.docs[0];
                    const data = doc.data();
                    output.innerHTML += '<p>üìã Primeiro documento:</p>';
                    output.innerHTML += `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                } else {
                    output.innerHTML += '<p>‚ö†Ô∏è Nenhum documento encontrado na cole√ß√£o users</p>';
                }

                // Testar todas as cole√ß√µes
                const collections = ['users'];
                for (const col of collections) {
                    try {
                        const colQuery = query(collection(db, col), limit(5));
                        const colSnapshot = await getDocs(colQuery);
                        output.innerHTML += `<p>üìÅ Cole√ß√£o '${col}': ${colSnapshot.size} documentos</p>`;
                    } catch (error) {
                        output.innerHTML += `<p>‚ùå Erro na cole√ß√£o '${col}': ${error.message}</p>`;
                    }
                }

            } catch (error) {
                output.innerHTML += `<p>‚ùå Erro na conex√£o: ${error.message}</p>`;
                console.error('Erro detalhado:', error);
            }
        }

        // Executar teste
        testConnection();
    </script>
</body>
</html>